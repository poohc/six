<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">
    
    <select id="selectJoinPartnerCount" parameterType="java.util.HashMap" resultType="Integer">
		SELECT COUNT(*)		       
		  FROM SIX_PARTNER
		 WHERE 1=1 
		  <if test="name != null">
		   AND NAME = #{name}
		   </if>
    </select>    
    
    <select id="selectJoinPartnerList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		SELECT SEQ,
		       ID,
		       NAME,
		       (SELECT CD_NAME
		          FROM SIX_COMMON_CODE A 
		         WHERE A.CD = REQUEST_CD) REQUEST_NAME,
		       IMAGE,
		       POST,
		       INTRODUCE,
		       SLOGAN,
		       (SELECT CD_NAME
		          FROM SIX_COMMON_CODE A 
		         WHERE A.CD = BANK_CD) BANK_NAME,
		       ACCOUNT_NO,
		       ACCOUNT_NAME,
		       CREATE_DATE,
		       IS_CONFIRM,
		       UPDATE_USER_ID,
		       UPDATE_DATE
		  FROM SIX_PARTNER
		 WHERE 1=1
		   <if test="name != null">
		   AND NAME = #{name}
		   </if>		   
	  ORDER BY SEQ DESC
		   <if test="start != null">
		 LIMIT #{start},#{end}    
		   </if>      		   
    </select>       
    
    <select id="selectPartnerInfo" parameterType="String" resultType="java.util.HashMap">
    	SELECT SEQ,
		       ID,
		       NAME,
		       REQUEST_CD,
		       (SELECT CD_NAME
		          FROM SIX_COMMON_CODE A 
		         WHERE A.CD = REQUEST_CD) REQUEST_NAME,
		       IMAGE,
		       POST,
		       INTRODUCE,
		       SLOGAN,
		       BANK_CD,
		       (SELECT CD_NAME
		          FROM SIX_COMMON_CODE A 
		         WHERE A.CD = BANK_CD) BANK_NAME,
		       ACCOUNT_NO,
		       ACCOUNT_NAME,
		       CREATE_DATE,
		       IS_CONFIRM,
		       UPDATE_USER_ID,
		       UPDATE_DATE
		  FROM SIX_PARTNER
		 WHERE SEQ = #{seq}
	</select>
	
    <update id="updatePartner" parameterType="java.util.HashMap">
        UPDATE SIX_PARTNER
           <set>
	          <if test="requestCd != null">REQUEST_CD=#{requestCd},</if>
	          <if test="image != null">IMAGE=#{image},</if>
	      	  <if test="post != null">POST=post,</if>
	      	  <if test="introduce != null">INTRODUCE=#{introduce},</if>
	      	  <if test="slogan != null">SLOGAN=#{slogan},</if>
	      	  <if test="bankCd != null">BANK_CD=#{bankCd},</if>
	      	  <if test="accountNo != null">ACCOUNT_NO=#{accountNo},</if>
	      	  <if test="accountName != null">ACCOUNT_NAME=#{accountName},</if>
	      	  <if test="isConfirm != null">IS_CONFIRM=#{isConfirm},</if>
	      	  UPDATE_USER_ID = #{updateUserId},
		      UPDATE_DATE = now()
	       </set>
         WHERE SEQ = #{seq}
    </update>
    
</mapper>