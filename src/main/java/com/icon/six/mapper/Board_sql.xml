<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">
    
    <select id="selectIntroBoardCount" resultType="Integer">
		SELECT COUNT(*)		       
		  FROM SIX_INTRO_BOARD
		 WHERE 1=1
		 <if test="title != null">
		   AND TITLE LIKE CONCAT('%', #{title} , '%')		   
		 </if> 
		 <if test="contents != null">
		   AND CONTENTS LIKE CONCAT('%', #{contents} , '%')
		 </if>
    </select>    
    
    <select id="selectIntroBoard" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		SELECT SEQ,
		       TITLE,
		       CONTENTS,
		       CREATE_USER_ID,
		       CREATE_DATE,
		       UPDATE_USER_ID,
		       UPDATE_DATE,
		       HIT_COUNT,
		       IS_NOTICE		       
		  FROM SIX_INTRO_BOARD
		 WHERE 1=1
		   <if test="title != null">		       
		   AND TITLE LIKE CONCAT('%', #{title} , '%')
		   </if>
		   <if test="contents != null">
		   AND CONTENTS LIKE CONCAT('%', #{contents} , '%')
		   </if>
	  ORDER BY SEQ DESC
		   <if test="start != null">
		 LIMIT #{start},#{end}    
		   </if>
      		   
    </select>    
    
    <select id="getIntroBoardInfo" parameterType="String" resultType="java.util.HashMap">
        SELECT SEQ,
		       TITLE,
		       CONTENTS,
		       CREATE_USER_ID,
		       CREATE_DATE,
		       UPDATE_USER_ID,
		       UPDATE_DATE,
		       HIT_COUNT,
		       IS_NOTICE		       
		  FROM SIX_INTRO_BOARD
		 WHERE SEQ = #{seq}
    </select>
    
    <insert id="insertIntroBoard" parameterType="com.icon.six.vo.IntroBoardVo">
    	INSERT INTO SIX_INTRO_BOARD
			    	(
		    		   TITLE,
				       CONTENTS,
				       CREATE_USER_ID,
				       CREATE_DATE,
				       HIT_COUNT,
				       IS_NOTICE
			    	)
			 VALUES (
				 	   #{title},
				 	   #{contents},
				 	   #{createUserId},
				 	   now(),
				 	   0,
				 	   #{isNotice}		 		
			 		)      	
    </insert>
    
    <update id="updateIntroBoard" parameterType="com.icon.six.vo.IntroBoardVo">
        UPDATE SIX_INTRO_BOARD
         <set>
	          <if test="title != null">TITLE=#{title},</if>
	          <if test="contents != null">CONTENTS=#{contents},</if>
	      	  <if test="hitCount != null">HIT_COUNT=HIT_COUNT+1,</if>
	      	  <if test="isNotice != null">IS_NOTICE=#{isNotice},</if>
	      	  UPDATE_USER_ID = #{updateUserId},
		      UPDATE_DATE = now()
	    </set>
	    WHERE SEQ = #{seq}                   
    </update>
    
    <delete id="deleteIntroBoard" parameterType="String">
        DELETE 
          FROM SIX_INTRO_BOARD
         WHERE SEQ = #{seq}
    </delete>
    
</mapper>